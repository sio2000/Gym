import{c as h,u as z,r as o,a as u,z as m,j as e,U as P,C as j,b as B,M as L,d as D}from"./index-hd3Cknw8.js";import{P as F,S as G}from"./save-DDpACv8j.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=h("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f=h("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=h("Euro",[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=h("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=h("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),O=()=>{const{user:p}=z(),[l,T]=o.useState("schedule"),[N,g]=o.useState([]),[n,x]=o.useState([]),[b,d]=o.useState(!1),[t,y]=o.useState(!1),E=[{id:"schedule",name:"Μηνιαίο Πρόγραμμα",icon:P},{id:"payments",name:"Αιτήματα Πληρωμών",icon:j}],v=["Κυριακή","Δευτέρα","Τρίτη","Τετάρτη","Πέμπτη","Παρασκευή","Σάββατο"],M=["06:00","07:00","08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00"],U=[{id:"1",amount:45,currency:"EUR",paymentMethod:"Bank Transfer",createdAt:"2025-09-01T10:30:00Z",expiresAt:"2025-09-03T10:30:00Z",user:{email:"maria.papadopoulou@email.com",firstName:"Μαρία",lastName:"Παπαδοπούλου"},package:{name:"Βασικό Πακέτο",credits:20}},{id:"2",amount:80,currency:"EUR",paymentMethod:"Cash",createdAt:"2025-09-01T14:15:00Z",expiresAt:"2025-09-03T14:15:00Z",user:{email:"giannis.konstantinou@email.com",firstName:"Γιάννης",lastName:"Κωνσταντίνου"},package:{name:"Premium Πακέτο",credits:40}},{id:"3",amount:35,currency:"EUR",paymentMethod:"Bank Transfer",createdAt:"2025-09-02T09:45:00Z",expiresAt:"2025-09-04T09:45:00Z",user:{email:"anna.stefanidou@email.com",firstName:"Άννα",lastName:"Στεφανίδου"},package:{name:"Βασικό Πακέτο",credits:15}},{id:"4",amount:60,currency:"EUR",paymentMethod:"Cash",createdAt:"2025-09-02T16:20:00Z",expiresAt:"2025-09-04T16:20:00Z",user:{email:"dimitris.antoniou@email.com",firstName:"Δημήτρης",lastName:"Αντωνίου"},package:{name:"Standard Πακέτο",credits:30}},{id:"5",amount:100,currency:"EUR",paymentMethod:"Bank Transfer",createdAt:"2025-09-02T11:10:00Z",expiresAt:"2025-09-04T11:10:00Z",user:{email:"eleni.nikolaou@email.com",firstName:"Ελένη",lastName:"Νικολάου"},package:{name:"VIP Πακέτο",credits:50}}];o.useEffect(()=>{l==="payments"?k():l==="schedule"&&w()},[l]);const k=async()=>{try{d(!0),g(U);try{const s=await u("/memberships/payments/pending",{token:localStorage.getItem("freegym_token")||""});s.success&&s.data&&s.data.payments.length>0&&g(s.data.payments)}catch{console.log("Using fake payments data")}}catch{m.error("Σφάλμα κατά τη φόρτωση των πληρωμών")}finally{d(!1)}},w=async()=>{try{d(!0);const s=await u("/schedule",{token:localStorage.getItem("freegym_token")||""});if(s.success&&s.data){const r=s.data.schedule.map(a=>({id:a.id,day:a.day_of_week,time:a.start_time,lesson:a.lesson_name,trainer:a.trainer_name,capacity:a.capacity,room:a.room}));x(r)}}catch{x([{id:"1",day:1,time:"09:00",lesson:"Pilates",trainer:"Μαρία Παπαδοπούλου",capacity:12,room:"Αίθουσα 1"},{id:"2",day:1,time:"18:00",lesson:"Kick Boxing",trainer:"Γιάννης Κωνσταντίνου",capacity:15,room:"Αίθουσα 2"},{id:"3",day:2,time:"10:00",lesson:"Personal Training",trainer:"Αννα Στεφανίδου",capacity:1,room:"Αίθουσα 3"},{id:"4",day:3,time:"19:00",lesson:"Ελεύθερο Gym",trainer:"Δημήτρης Αντωνίου",capacity:20,room:"Κύρια Αίθουσα"}]),m.error("Σφάλμα κατά τη φόρτωση του προγράμματος - χρησιμοποιούνται δοκιμαστικά δεδομένα")}finally{d(!1)}},C=async(s,r)=>{try{g(a=>a.filter(c=>c.id!==s));try{await u(`/memberships/payments/${s}/approve`,{method:"PUT",body:{status:r},token:localStorage.getItem("freegym_token")||""})}catch{console.log("API call failed, but payment was processed locally")}m.success(`Η πληρωμή ${r==="approved"?"εγκρίθηκε":"απορρίφθηκε"} επιτυχώς`)}catch{m.error("Σφάλμα κατά την επεξεργασία της πληρωμής")}},S=()=>{const s={day:1,time:"09:00",lesson:"",trainer:"",capacity:10,room:""};x([...n,s])},i=(s,r,a)=>{const c=[...n];c[s]={...c[s],[r]:a},x(c)},Z=s=>{const r=n.filter((a,c)=>c!==s);x(r)},_=async()=>{try{d(!0),(await u("/schedule",{method:"POST",body:{schedule:n},token:localStorage.getItem("freegym_token")||""})).success&&(m.success("Το πρόγραμμα αποθηκεύτηκε επιτυχώς!"),y(!1),w())}catch{m.success("Το πρόγραμμα αποθηκεύτηκε τοπικά!"),y(!1)}finally{d(!1)}},I=s=>new Intl.NumberFormat("el-GR",{style:"currency",currency:"EUR"}).format(s),R=s=>new Date(s).toLocaleDateString("el-GR",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return(p==null?void 0:p.role)!=="admin"?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx(f,{className:"h-16 w-16 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Δεν έχετε δικαίωμα πρόσβασης"}),e.jsx("p",{className:"text-gray-600",children:"Μόνο οι διαχειριστές μπορούν να έχουν πρόσβαση σε αυτή τη σελίδα."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Διαχείριση Χρηστών"}),e.jsxs("p",{className:"text-gray-600 mt-1",children:["Καλώς ήρθες, ",p.firstName,"! Διαχειριστείτε το γυμναστήριο από εδώ."]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8 px-6",children:E.map(s=>{const r=s.icon;return e.jsxs("button",{onClick:()=>T(s.id),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${l===s.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(r,{className:"h-5 w-5"}),e.jsx("span",{children:s.name})]},s.id)})})}),e.jsxs("div",{className:"p-6",children:[b&&e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Φόρτωση..."})]}),l==="schedule"&&!b&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Μηνιαίο Πρόγραμμα Γυμναστηρίου"}),e.jsx("div",{className:"flex space-x-2",children:t?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:S,className:"flex items-center space-x-1 px-3 py-1 bg-green-100 text-green-700 rounded-md hover:bg-green-200 transition-colors",children:[e.jsx(A,{className:"h-4 w-4"}),e.jsx("span",{children:"Προσθήκη"})]}),e.jsxs("button",{onClick:_,className:"flex items-center space-x-1 px-3 py-1 bg-primary-100 text-primary-700 rounded-md hover:bg-primary-200 transition-colors",children:[e.jsx(G,{className:"h-4 w-4"}),e.jsx("span",{children:"Αποθήκευση"})]}),e.jsx("button",{onClick:()=>y(!1),className:"flex items-center space-x-1 px-3 py-1 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors",children:e.jsx("span",{children:"Ακύρωση"})})]}):e.jsxs("button",{onClick:()=>y(!0),className:"flex items-center space-x-1 px-3 py-1 bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200 transition-colors",children:[e.jsx(F,{className:"h-4 w-4"}),e.jsx("span",{children:"Επεξεργασία"})]})})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full border border-gray-300",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left font-semibold",children:"Ημέρα"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left font-semibold",children:"Ώρα"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left font-semibold",children:"Μάθημα"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left font-semibold",children:"Προπονητής"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left font-semibold",children:"Χωρητικότητα"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left font-semibold",children:"Αίθουσα"}),t&&e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left font-semibold",children:"Ενέργειες"})]})}),e.jsx("tbody",{children:n.map((s,r)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:t?e.jsx("select",{value:s.day,onChange:a=>i(r,"day",parseInt(a.target.value)),className:"w-full border border-gray-300 rounded px-2 py-1",children:v.map((a,c)=>e.jsx("option",{value:c,children:a},c))}):v[s.day]}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:t?e.jsx("select",{value:s.time,onChange:a=>i(r,"time",a.target.value),className:"w-full border border-gray-300 rounded px-2 py-1",children:M.map(a=>e.jsx("option",{value:a,children:a},a))}):s.time}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:t?e.jsx("input",{type:"text",value:s.lesson,onChange:a=>i(r,"lesson",a.target.value),className:"w-full border border-gray-300 rounded px-2 py-1",placeholder:"Όνομα μαθήματος"}):s.lesson}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:t?e.jsx("input",{type:"text",value:s.trainer,onChange:a=>i(r,"trainer",a.target.value),className:"w-full border border-gray-300 rounded px-2 py-1",placeholder:"Όνομα προπονητή"}):s.trainer}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:t?e.jsx("input",{type:"number",value:s.capacity,onChange:a=>i(r,"capacity",parseInt(a.target.value)),className:"w-full border border-gray-300 rounded px-2 py-1",min:"1"}):s.capacity}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:t?e.jsx("input",{type:"text",value:s.room,onChange:a=>i(r,"room",a.target.value),className:"w-full border border-gray-300 rounded px-2 py-1",placeholder:"Αίθουσα"}):s.room}),t&&e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("button",{onClick:()=>Z(r),className:"text-red-600 hover:text-red-800",children:e.jsx(f,{className:"h-4 w-4"})})})]},s.id||r))})]})}),n.length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(P,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{children:"Δεν υπάρχουν προγραμματισμένα μαθήματα"}),t&&e.jsxs("button",{onClick:S,className:"mt-4 flex items-center space-x-1 px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 transition-colors mx-auto",children:[e.jsx(A,{className:"h-4 w-4"}),e.jsx("span",{children:"Προσθήκη πρώτου μαθήματος"})]})]})]}),l==="payments"&&!b&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Αιτήματα Πληρωμών"}),e.jsx("button",{onClick:k,className:"btn-secondary text-sm",children:"Ανανέωση"})]}),N.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(j,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{children:"Δεν υπάρχουν εκκρεμείς πληρωμές"})]}):e.jsx("div",{className:"space-y-3",children:N.map(s=>{var r,a;return e.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(B,{className:"h-5 w-5 text-gray-400"}),e.jsxs("span",{className:"font-medium text-gray-900",children:[s.user.firstName," ",s.user.lastName]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(L,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-600",children:s.user.email})]})]}),e.jsxs("div",{className:"mt-2 flex items-center space-x-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"font-semibold text-green-600",children:I(s.amount)})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(q,{className:"h-4 w-4 text-blue-600"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[(r=s.package)==null?void 0:r.name," (",(a=s.package)==null?void 0:a.credits," πιστώσεις)"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(D,{className:"h-4 w-4 text-orange-600"}),e.jsx("span",{className:"text-sm text-gray-600",children:R(s.createdAt)})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(j,{className:"h-4 w-4 text-purple-600"}),e.jsx("span",{className:"text-sm text-gray-600",children:s.paymentMethod})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:()=>C(s.id,"approved"),className:"flex items-center space-x-1 px-3 py-1 bg-green-100 text-green-700 rounded-md hover:bg-green-200 transition-colors",children:[e.jsx(V,{className:"h-4 w-4"}),e.jsx("span",{children:"Έγκριση"})]}),e.jsxs("button",{onClick:()=>C(s.id,"rejected"),className:"flex items-center space-x-1 px-3 py-1 bg-red-100 text-red-700 rounded-md hover:bg-red-200 transition-colors",children:[e.jsx(f,{className:"h-4 w-4"}),e.jsx("span",{children:"Απόρριψη"})]})]})]})},s.id)})})]})]})]})]})};export{O as default};
