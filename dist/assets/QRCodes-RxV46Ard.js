import{i as R,u as C,r as D,d as T,j as e,e as u,m as g,a as k,Q as n,f as o,c as I,C as N,U as S,z as p}from"./index-DHSZwrOZ.js";import{M as E}from"./map-pin-C587qDo4.js";import{S as $}from"./share-2-DwK8MuD4.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=R("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),B=()=>{const{user:m}=C(),[y,b]=D.useState(null),i=T.filter(s=>s.userId===(m==null?void 0:m.id)),x=s=>`https://freegym.com/checkin/${s}`,v=(s,t)=>{p.success(`QR Code για ${t} κατέβηκε επιτυχώς`)},w=async(s,t)=>{if(navigator.share)try{await navigator.share({title:`QR Code - ${t}`,text:`QR Code για το μάθημα ${t}`,url:x(s)})}catch(a){console.log("Error sharing:",a)}else navigator.clipboard.writeText(x(s)),p.success("Link αντιγράφηκε στο clipboard")},d=s=>{const t=new Date(s),a=new Date,c=t.getTime()-a.getTime();return Math.ceil(c/(1e3*60*60*24))<0},Q=s=>{const t=new Date(s),a=new Date,l=(t.getTime()-a.getTime())/(1e3*60*60);return l>=-2&&l<=2};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"QR Codes"}),e.jsx("p",{className:"text-gray-600",children:"Διαχειριστείτε τα QR codes για τα μαθήματά σας"})]})}),e.jsxs("div",{className:"card",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Ενεργά QR Codes"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[i.filter(s=>!d(s.date)).map(s=>{var j,f;const t=u.find(r=>r.id===s.lessonId),a=g.find(r=>r.id===(t==null?void 0:t.roomId)),c=k.find(r=>r.id===(t==null?void 0:t.trainerId));if(!t)return null;const l=Q(s.date),h=d(s.date);return e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:"inline-block p-4 bg-gray-100 rounded-lg",children:e.jsx(n,{className:"h-24 w-24 text-gray-600"})}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"QR Code Preview"})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsx("h3",{className:"font-medium text-gray-900 text-center",children:t.name}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),o(s.date)]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),(j=t.schedule[0])==null?void 0:j.startTime," - ",(f=t.schedule[0])==null?void 0:f.endTime]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{className:"h-4 w-4 mr-2"}),a==null?void 0:a.name]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(S,{className:"h-4 w-4 mr-2"}),c!=null&&c.bio?c.bio.split(" ").slice(0,3).join(" ")+"...":"Trainer"]})]})]}),e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx("span",{className:`badge ${h?"badge-error":l?"badge-success":"badge-warning"}`,children:h?"Ληγμένο":l?"Ενεργό":"Σε αναμονή"})}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>v(s.id,t.name),className:"btn-secondary flex-1 flex items-center justify-center text-sm py-2",children:[e.jsx(M,{className:"h-4 w-4 mr-1"}),"Download"]}),e.jsxs("button",{onClick:()=>w(s.id,t.name),className:"btn-primary flex-1 flex items-center justify-center text-sm py-2",children:[e.jsx($,{className:"h-4 w-4 mr-1"}),"Share"]})]}),e.jsx("div",{className:"mt-3 p-2 bg-gray-50 rounded text-xs text-gray-600 font-mono break-all",children:x(s.id)})]},s.id)}),i.filter(s=>!d(s.date)).length===0&&e.jsxs("div",{className:"col-span-full text-center py-8 text-gray-500",children:[e.jsx(n,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{children:"Δεν έχετε ενεργά QR codes"}),e.jsx("p",{className:"text-sm",children:"Κλείστε ένα μάθημα για να δημιουργηθεί QR code"})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Ιστορικό QR Codes"}),e.jsxs("div",{className:"space-y-3",children:[i.filter(s=>d(s.date)).map(s=>{var c;const t=u.find(l=>l.id===s.lessonId),a=g.find(l=>l.id===(t==null?void 0:t.roomId));return t?e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-gray-200 rounded-lg",children:e.jsx(n,{className:"h-5 w-5 text-gray-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:t.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[o(s.date)," • ",(c=t.schedule[0])==null?void 0:c.startTime," • ",a==null?void 0:a.name]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"badge badge-error",children:"Ληγμένο"}),e.jsx("span",{className:"text-sm text-gray-500",children:o(s.date)})]})]},s.id):null}),i.filter(s=>d(s.date)).length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(N,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{children:"Δεν έχετε ληγμένα QR codes"})]})]})]}),e.jsxs("div",{className:"card bg-blue-50 border-blue-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-3",children:"Πώς να χρησιμοποιήσετε τα QR Codes"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-blue-800",children:[e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-200 rounded-full flex items-center justify-center text-blue-800 text-xs font-bold mt-0.5",children:"1"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Κλείστε ένα μάθημα"}),e.jsx("p",{children:"Το QR code δημιουργείται αυτόματα μετά την κράτηση"})]})]}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-200 rounded-full flex items-center justify-center text-blue-800 text-xs font-bold mt-0.5",children:"2"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Παρουσιάστε το QR code"}),e.jsx("p",{children:"Στο γυμναστήριο για check-in/check-out"})]})]}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-200 rounded-full flex items-center justify-center text-blue-800 text-xs font-bold mt-0.5",children:"3"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Κερδίστε πιστώσεις"}),e.jsx("p",{children:"Μετά την ολοκλήρωση του μαθήματος"})]})]})]})]}),y&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"QR Code Details"}),e.jsx("div",{className:"p-4 bg-gray-100 rounded-lg mb-4",children:e.jsx(n,{className:"h-32 w-32 text-gray-600 mx-auto"})}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Σκανάρετε αυτό το QR code στο γυμναστήριο για check-in"}),e.jsx("button",{onClick:()=>b(null),className:"btn-primary w-full",children:"Κλείσιμο"})]})})})]})};export{B as default};
