import{i as xe,u as _e,r as x,j as e,v as Pe,c as Te,n as De,x as Se,X as me,U as Ie,y as h,z as b}from"./index-DHSZwrOZ.js";import{U as Ee}from"./user-check-CAbfbCgc.js";import{K as Le}from"./key-DfhU6fKk.js";import{P as Me,S as $e}from"./save-ChvGLH4W.js";import{P as Ue}from"./plus-AE_6ECmf.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=xe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=xe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),ze=()=>{var ie,de,ce;const{user:l}=_e(),[k,ue]=x.useState("personal-training"),[j,R]=x.useState([]),[I,Q]=x.useState([]),[_,ge]=x.useState(null),[c,P]=x.useState(null),[V,T]=x.useState(!1),[A,Y]=x.useState(!1),[he,O]=x.useState(!1),[u,B]=x.useState({code:"",selectedUserId:""}),[y,H]=x.useState("individual"),[N,q]=x.useState([]),[G,se]=x.useState(""),[J,X]=x.useState("dropdown"),[v,W]=x.useState(""),[p,E]=x.useState("all"),[f,S]=x.useState(1),Z=10,[K,w]=x.useState([{id:"tmp-1",date:new Date().toISOString().split("T")[0],startTime:"18:00",endTime:"19:00",type:"personal",trainer:"",room:"Αίθουσα Mike",notes:""}]),be=[{id:"personal-training",name:"Personal Training Πρόγραμμα",icon:Te},{id:"payments",name:"Αιτήματα Πληρωμών",icon:De},{id:"analytics",name:"Αναλυτικά Κρατήσεων",icon:Se},{id:"users",name:"Διαχείριση Χρηστών",icon:Ee}],pe=["Κυριακή","Δευτέρα","Τρίτη","Τετάρτη","Πέμπτη","Παρασκευή","Σάββατο"],L=r=>{var a;if(!((a=r.scheduleData)!=null&&a.sessions)||r.scheduleData.sessions.length===0)return"Personal Training";const s=r.scheduleData.sessions.map(o=>o.type),t=[...new Set(s)];if(t.length===1)switch(t[0]){case"personal":return"Personal Training";case"kickboxing":return"Kick Boxing";case"combo":return"Combo Training";default:return"Personal Training"}else if(t.length>1)return"Combo Training";return"Personal Training"},te=r=>{const s=["user1@freegym.gr","user2@freegym.gr"],t=["PERSONAL2024","KICKBOX2024"],a=!!r.email&&s.includes(r.email),o=!!r.personalTrainingCode&&t.includes(r.personalTrainingCode);return a||o},ae=j.filter(r=>{if(!G)return!0;const s=G.toLowerCase();return r.firstName.toLowerCase().includes(s)||r.lastName.toLowerCase().includes(s)||r.email.toLowerCase().includes(s)||`${r.firstName} ${r.lastName}`.toLowerCase().includes(s)}),M=I.filter(r=>{const s=!v||(()=>{const a=v.toLowerCase();return r.user.firstName.toLowerCase().includes(a)||r.user.lastName.toLowerCase().includes(a)||r.user.email.toLowerCase().includes(a)||`${r.user.firstName} ${r.user.lastName}`.toLowerCase().includes(a)})(),t=p==="all"||r.status===p;return s&&t}),g=Math.ceil(M.length/Z),ee=(f-1)*Z,le=ee+Z,ne=M.slice(ee,le);x.useEffect(()=>{S(1)},[v,p]);const oe=["06:00","07:00","08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00"],fe=async()=>{try{console.log("[AdminPanel] Checking admin role in database...");const{data:r,error:s}=await h.from("user_profiles").select("user_id, role, first_name, last_name, email").eq("user_id",l==null?void 0:l.id).single();return s?(console.error("[AdminPanel] Error checking admin profile:",s),!1):(console.log("[AdminPanel] Admin profile in database:",r),console.log("[AdminPanel] Admin role in database:",r==null?void 0:r.role),(r==null?void 0:r.role)==="admin")}catch(r){return console.error("[AdminPanel] Exception checking admin role:",r),!1}},ye=async()=>{try{console.log("[AdminPanel] Testing if we can create data...");const r={user_id:l==null?void 0:l.id,month:1,year:2e3,schedule_data:{sessions:[]},status:"pending",created_by:l==null?void 0:l.id},{data:s,error:t}=await h.from("personal_training_schedules").insert(r).select();return t?(console.log("[AdminPanel] Cannot create data - RLS blocking:",t.message),!1):s&&s.length>0?(await h.from("personal_training_schedules").delete().eq("id",s[0].id),console.log("[AdminPanel] Can create data - RLS working correctly"),!0):!1}catch(r){return console.error("[AdminPanel] Exception testing data creation:",r),!1}},je=async(r,s)=>{if(!s){console.log("[AdminPanel] No admin ID available for test data creation");return}try{console.log("[AdminPanel] Creating test schedule for user:",r.email);const t={user_id:r.id,month:new Date().getMonth()+1,year:new Date().getFullYear(),schedule_data:{sessions:[{id:"test-1",date:new Date().toISOString().split("T")[0],startTime:"18:00",endTime:"19:00",type:"personal",trainer:"Μαρία Παπαδοπούλου",room:"Αίθουσα Mike",notes:"Test session created by admin"}],notes:"Test program created by admin",specialInstructions:"This is test data"},status:"pending",created_by:s},{data:a,error:o}=await h.from("personal_training_schedules").insert(t).select();o?console.error("[AdminPanel] Error creating test schedule:",o):(console.log("[AdminPanel] Test schedule created successfully:",a),setTimeout(()=>{F()},1e3))}catch(t){console.error("[AdminPanel] Exception creating test schedule:",t)}},F=async()=>{console.log("[AdminPanel] ===== DATA LOADING STARTED ====="),console.log("[AdminPanel] Current user:",l==null?void 0:l.email,"Role:",l==null?void 0:l.role);try{T(!0),console.log("[AdminPanel] Querying user_profiles table...");const{data:r,error:s}=await h.from("user_profiles").select("*").order("created_at",{ascending:!1});if(console.log("[AdminPanel] User profiles query result - rows:",r==null?void 0:r.length,"error:",s),s)throw console.error("[AdminPanel] User profiles error:",s),s;console.log("[AdminPanel] Querying personal_training_schedules table..."),console.log("[AdminPanel] Current auth user ID:",l==null?void 0:l.id),console.log("[AdminPanel] Current auth user role:",l==null?void 0:l.role),console.log("[AdminPanel] Attempting to query personal_training_schedules...");let t=[],a=null;const{data:o,error:i}=await h.from("personal_training_schedules").select("*").order("created_at",{ascending:!1});if(i){console.log("[AdminPanel] Direct query failed:",i);const{data:n,error:d}=await h.from("personal_training_schedules").select("id, user_id, status").limit(10);if(d){console.log("[AdminPanel] Limited query also failed:",d);const{count:U,error:re}=await h.from("personal_training_schedules").select("*",{count:"exact",head:!0});console.log("[AdminPanel] Count query result:",U,"error:",re)}else console.log("[AdminPanel] Limited query succeeded:",n),t=n||[]}else console.log("[AdminPanel] Direct query succeeded:",o),t=o||[];if(a=i,console.log("[AdminPanel] Schedules query result - rows:",t==null?void 0:t.length,"error:",a),(t==null?void 0:t.length)===0&&!a){console.log("[AdminPanel] Query succeeded but returned 0 rows - checking RLS policies...");const n=await fe();console.log("[AdminPanel] Is admin in database:",n);const{count:d,error:U}=await h.from("personal_training_schedules").select("*",{count:"exact",head:!0});console.log("[AdminPanel] Total rows in table (bypassing RLS):",d,"error:",U),d&&d>0&&(console.warn("[AdminPanel] RLS is blocking access to existing data! Table has",d,"rows but query returns 0."),console.warn("[AdminPanel] Admin role might not be properly configured in RLS policies."),console.warn("[AdminPanel] Please run the SQL script: database/fix_admin_rls_policies.sql"))}if(a){console.error("[AdminPanel] Schedules query failed with error:",a),console.log("[AdminPanel] Error code:",a.code),console.log("[AdminPanel] Error message:",a.message),console.log("[AdminPanel] Error details:",a.details),console.log("[AdminPanel] Error hint:",a.hint),console.log("[AdminPanel] Attempting to check table existence...");const{data:n,error:d}=await h.from("personal_training_schedules").select("count").limit(1);console.log("[AdminPanel] Table check result:",n,"error:",d)}if(a&&(console.error("[AdminPanel] Schedules error:",a),console.log("[AdminPanel] RLS might be blocking access. Checking if we can insert test data..."),console.log("[AdminPanel] Continuing with empty schedules due to RLS restrictions")),!r||r.length===0){console.log("[AdminPanel] No users found in database - setting empty states"),R([]),Q([]);return}console.log("[AdminPanel] Transforming user profiles...");const m=r.map(n=>({id:n.user_id,email:n.email||`user-${n.user_id.slice(0,8)}@example.com`,firstName:n.first_name||"",lastName:n.last_name||"",profile_photo:n.profile_photo||"",profile_photo_locked:n.profile_photo_locked||!1,dob:n.dob||"",address:n.address||"",emergency_contact:n.emergency_contact||"",dob_locked:n.dob_locked||!1,hasPersonalTrainingCode:!1,personalTrainingCode:void 0,packageType:void 0}));console.log("[AdminPanel] Transformed users count:",m.length),R(m),console.log("[AdminPanel] Creating program statuses from schedules..."),console.log("[AdminPanel] Schedules data:",t);const C=(t||[]).map(n=>{console.log("[AdminPanel] Processing schedule:",n.id,"for user:",n.user_id);const d=m.find(re=>re.id===n.user_id);if(!d)return console.warn(`[AdminPanel] User not found for schedule ${n.id}, user_id: ${n.user_id}`),null;const U={user:d,schedule:{id:n.id,userId:n.user_id,month:n.month,year:n.year,status:n.status,scheduleData:n.schedule_data,createdBy:n.created_by,createdAt:n.created_at,updatedAt:n.updated_at},status:n.status};return console.log("[AdminPanel] Created program status:",U),U}).filter(n=>n!==null);console.log("[AdminPanel] Final program statuses count:",C.length),C.length===0&&m.length>0&&(console.log("[AdminPanel] No schedules found. Creating test data to verify system..."),await ye()?await je(m[0],l==null?void 0:l.id):(console.warn("[AdminPanel] Cannot create test data due to RLS restrictions."),console.warn("[AdminPanel] Please fix RLS policies by running: database/fix_admin_rls_policies.sql"))),Q(C),console.log("[AdminPanel] Checking personal training codes...");const{data:D,error:z}=await h.from("personal_training_codes").select("*").limit(5);console.log("[AdminPanel] Personal training codes check - rows:",D==null?void 0:D.length,"error:",z),await Ne(m),console.log("[AdminPanel] ===== DATA LOADING COMPLETED SUCCESSFULLY =====")}catch(r){console.error("[AdminPanel] ===== DATA LOADING FAILED ====="),console.error("[AdminPanel] Error details:",r);const s=r instanceof Error?r.message:"Unknown error";b.error(`Σφάλμα κατά τη φόρτωση των χρηστών: ${s}`),R([]),Q([])}finally{T(!1)}},Ne=async r=>{try{const{data:s,error:t}=await h.from("personal_training_codes").select("used_by, code, package_type").eq("is_active",!0);if(t){console.error("Error fetching personal training codes:",t),R(r);return}const a=r.map(o=>{const i=s==null?void 0:s.find(m=>m.used_by===o.id);return i?{...o,hasPersonalTrainingCode:!0,personalTrainingCode:i.code,packageType:i.package_type}:o});R(a)}catch(s){console.error("Error checking personal training codes:",s)}};x.useEffect(()=>{console.log("[AdminPanel] useEffect triggered - user:",l==null?void 0:l.email,"role:",l==null?void 0:l.role,"activeTab:",k),l&&l.role==="admin"&&k==="personal-training"?(console.log("[AdminPanel] User changed - loading data for admin user:",l.email),F()):l&&l.role!=="admin"?console.warn("[AdminPanel] User is not admin! Role:",l.role,"Email:",l.email):l||console.log("[AdminPanel] No user logged in")},[l,k]),x.useEffect(()=>{k==="personal-training"&&(console.log("[AdminPanel] useEffect triggered - loading data for personal-training tab"),F())},[k]);const ve=async r=>{try{T(!0);const{data:s,error:t}=await h.from("personal_training_schedules").select("id, user_id, month, year, schedule_data, status, created_by, created_at, updated_at, accepted_at, declined_at").eq("user_id",r).order("created_at",{ascending:!1}).limit(1);if(t){console.error("[ADMIN] Error loading schedule for user",r,t),b.error("Σφάλμα κατά τη φόρτωση του προγράμματος"),P(null);return}if(!s||s.length===0){P(null),b.error("Δεν βρέθηκε πρόγραμμα για τον συγκεκριμένο χρήστη");return}const a=s[0],o={id:a.id,userId:a.user_id,month:a.month,year:a.year,scheduleData:a.schedule_data,status:a.status,createdBy:a.created_by,createdAt:a.created_at,updatedAt:a.updated_at,acceptedAt:a.accepted_at,declinedAt:a.declined_at};P(o)}catch(s){console.error("[ADMIN] Exception while loading schedule",s),b.error("Σφάλμα κατά τη φόρτωση του προγράμματος"),P(null)}finally{T(!1)}},we=()=>{if(!c)return;const r={id:Date.now().toString(),date:new Date().toISOString().split("T")[0],startTime:"09:00",endTime:"10:00",type:"personal",trainer:"Μαρία Παπαδοπούλου",room:"Αίθουσα Personal Training",notes:""},s={...c,scheduleData:{...c.scheduleData,sessions:[...c.scheduleData.sessions,r]}};P(s)},$=(r,s,t)=>{if(!c)return;const a=c.scheduleData.sessions.map(i=>i.id===r?{...i,[s]:t}:i),o={...c,scheduleData:{...c.scheduleData,sessions:a}};P(o)},ke=r=>{if(!c)return;const s=c.scheduleData.sessions.filter(a=>a.id!==r),t={...c,scheduleData:{...c.scheduleData,sessions:s}};P(t)},Ae=async()=>{if(!(!c||!_))try{T(!0),b.success(`Το πρόγραμμα για τον ${_.firstName} ${_.lastName} αποθηκεύτηκε!`),Y(!1)}catch{b.error("Σφάλμα κατά την αποθήκευση του προγράμματος")}finally{T(!1)}},Ce=async()=>{var s;const r=y==="individual"?[u.selectedUserId]:N;if(!u.code.trim()){b.error("Παρακαλώ εισάγετε κωδικό");return}if(r.length===0){b.error("Παρακαλώ επιλέξτε χρήστη/ες");return}try{T(!0),console.log("[ADMIN] Starting to create personal training code...");const{data:t,error:a}=await h.from("personal_training_codes").select("id, code").eq("code",u.code.trim()).limit(1);if(a)throw console.error("[ADMIN] Error checking existing code:",a),a;if(t&&t.length>0){b.error(`Ο κωδικός "${u.code.trim()}" υπάρχει ήδη. Παρακαλώ επιλέξτε διαφορετικό κωδικό.`);return}for(const i of r){const m=j.find(D=>D.id===i);if(!m){b.error(`Δεν βρέθηκε ο χρήστης με ID: ${i}`);continue}console.log("[ADMIN] Selected user:",m.firstName,m.lastName,"ID:",m.id),console.log("[ADMIN] Admin user ID:",l==null?void 0:l.id),console.log("[ADMIN] Code to create:",u.code.trim()),console.log("[ADMIN] Inserting code into personal_training_codes...");const{error:C}=await h.from("personal_training_codes").insert({code:u.code.trim(),package_type:"personal",created_by:l==null?void 0:l.id,is_active:!0,used_by:m.id,used_at:new Date().toISOString()});if(C)throw console.error("[ADMIN] Code insertion error:",C),C;if(console.log("[ADMIN] Code inserted successfully for user:",m.email),i===r[0]){const D=K.map(d=>({id:d.id,date:d.date,startTime:d.startTime,endTime:d.endTime,type:d.type,trainer:d.trainer||"Προπονητής",room:d.room,notes:d.notes})),z={user_id:m.id,month:new Date().getMonth()+1,year:new Date().getFullYear(),schedule_data:{sessions:D,notes:"",trainer:((s=D[0])==null?void 0:s.trainer)||"Προπονητής",specialInstructions:""},status:"pending",created_by:l==null?void 0:l.id};console.log("[ADMIN] Schedule payload:",z),console.log("[ADMIN] Inserting schedule into personal_training_schedules...");const{error:n}=await h.from("personal_training_schedules").insert(z);if(n)throw console.error("[ADMIN] Schedule insertion error:",n),n;console.log("[ADMIN] Schedule inserted successfully")}}const o=r.map(i=>{const m=j.find(C=>C.id===i);return m?`${m.firstName} ${m.lastName}`:"Άγνωστος"}).join(", ");b.success(`Ο κωδικός ${u.code} δημιουργήθηκε επιτυχώς για ${y==="individual"?"τον χρήστη":"τους χρήστες"}: ${o}!`),O(!1),B({code:"",selectedUserId:""}),H("individual"),q([]),se(""),X("dropdown"),w([{id:"tmp-1",date:new Date().toISOString().split("T")[0],startTime:"18:00",endTime:"19:00",type:"personal",trainer:"",room:"Αίθουσα Mike",notes:""}]),F()}catch(t){if(console.error("[ADMIN] Error creating personal training code:",t),t&&typeof t=="object"&&"code"in t){const a=t;a.code==="23505"?b.error("Ο κωδικός υπάρχει ήδη. Παρακαλώ επιλέξτε διαφορετικό κωδικό."):a.code==="23503"?b.error("Πρόβλημα με τα δεδομένα χρήστη. Ελέγξτε ότι ο χρήστης υπάρχει."):a.code==="PGRST301"?b.error("Πρόβλημα αυθεντικοποίησης. Κάντε επανασύνδεση."):b.error(`Σφάλμα βάσης δεδομένων: ${a.message||"Άγνωστο σφάλμα"}`)}else b.error("Σφάλμα κατά τη δημιουργία του κωδικού")}finally{T(!1)}};return!l||l.role!=="admin"?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Δεν έχετε δικαίωμα πρόσβασης"}),e.jsx("p",{className:"text-gray-600",children:"Μόνο οι διαχειριστές μπορούν να έχουν πρόσβαση σε αυτή τη σελίδα."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-600 rounded-xl shadow-xl p-8 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"🏋️‍♂️ Διαχείριση Γυμναστηρίου"}),e.jsxs("p",{className:"text-blue-100 text-lg",children:["Καλώς ήρθες, ",e.jsx("span",{className:"font-semibold",children:l.firstName}),"! Διαχειριστείτε όλες τις λειτουργίες από εδώ."]})]}),e.jsx("div",{className:"bg-white/20 rounded-xl p-4 backdrop-blur-sm",children:e.jsx(Pe,{className:"h-12 w-12"})})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8 px-6",children:be.map(r=>{const s=r.icon;return e.jsxs("button",{onClick:()=>ue(r.id),className:`py-4 px-1 border-b-3 font-semibold text-sm flex items-center space-x-3 transition-all duration-200 ${k===r.id?"border-blue-500 text-blue-600 bg-blue-50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 hover:bg-gray-50"}`,children:[e.jsx(s,{className:`h-5 w-5 ${k===r.id?"text-blue-500":"text-gray-400"}`}),e.jsx("span",{children:r.name})]},r.id)})})}),e.jsxs("div",{className:"p-6",children:[V&&e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Φόρτωση..."})]}),k==="personal-training"&&!V&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl p-6 text-white mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"💪 Personal Training Πρόγραμμα"}),e.jsx("p",{className:"text-purple-100",children:"Διαχείριση προσωποποιημένων προγραμμάτων προπόνησης"})]}),e.jsxs("button",{onClick:()=>O(!0),className:"flex items-center space-x-3 px-6 py-3 bg-white/20 backdrop-blur-sm text-white rounded-xl hover:bg-white/30 transition-all duration-200 font-semibold shadow-lg",children:[e.jsx(Le,{className:"h-5 w-5"}),e.jsx("span",{children:"🔑 Δημιουργία Κωδικού"})]})]})}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl shadow-lg border border-blue-200 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-semibold text-blue-800 mb-3",children:"🔍 Αναζήτηση Χρήστη"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx(Re,{className:"h-5 w-5 text-blue-500"})}),e.jsx("input",{type:"text",placeholder:"Αναζητήστε με όνομα ή email...",value:v,onChange:r=>W(r.target.value),className:"w-full pl-12 pr-4 py-3 border-2 border-blue-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 text-gray-700 placeholder-gray-400"})]})]}),v&&e.jsxs("button",{onClick:()=>W(""),className:"px-4 py-3 text-sm text-blue-600 hover:text-red-600 flex items-center space-x-2 bg-white rounded-lg border border-blue-200 hover:border-red-200 transition-all duration-200",children:[e.jsx(me,{className:"h-4 w-4"}),e.jsx("span",{children:"Καθαρισμός"})]})]}),v&&e.jsxs("div",{className:"mt-4 bg-blue-100 text-blue-800 px-4 py-2 rounded-lg font-medium",children:["📊 Εμφανίζονται ",M.length," από ",I.length," προγράμματα"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:`bg-gradient-to-br from-blue-50 to-indigo-100 border-2 rounded-xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 cursor-pointer ${p==="all"?"border-blue-500 ring-4 ring-blue-200":"border-blue-300 hover:border-blue-400"}`,onClick:()=>E("all"),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-4 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-xl shadow-lg",children:e.jsx("span",{className:"text-white text-2xl",children:"📊"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-bold text-blue-800 uppercase tracking-wide",children:"Όλα"}),e.jsx("p",{className:"text-3xl font-bold text-blue-900",children:I.length})]})]}),e.jsx("div",{className:"text-blue-600 text-3xl",children:"📈"})]})}),e.jsx("div",{className:`bg-gradient-to-br from-yellow-50 to-orange-100 border-2 rounded-xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 cursor-pointer ${p==="pending"?"border-yellow-500 ring-4 ring-yellow-200":"border-yellow-300 hover:border-yellow-400"}`,onClick:()=>E("pending"),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-4 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-xl shadow-lg",children:e.jsx("span",{className:"text-white text-2xl",children:"⏳"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-bold text-yellow-800 uppercase tracking-wide",children:"Σε Αναμονή"}),e.jsx("p",{className:"text-3xl font-bold text-yellow-900",children:I.filter(r=>r.status==="pending").length})]})]}),e.jsx("div",{className:"text-yellow-600 text-3xl",children:"⏰"})]})}),e.jsx("div",{className:`bg-gradient-to-br from-green-50 to-emerald-100 border-2 rounded-xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 cursor-pointer ${p==="accepted"?"border-green-500 ring-4 ring-green-200":"border-green-300 hover:border-green-400"}`,onClick:()=>E("accepted"),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-4 bg-gradient-to-br from-green-400 to-emerald-500 rounded-xl shadow-lg",children:e.jsx("span",{className:"text-white text-2xl",children:"✅"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-bold text-green-800 uppercase tracking-wide",children:"Αποδεκτά"}),e.jsx("p",{className:"text-3xl font-bold text-green-900",children:I.filter(r=>r.status==="accepted").length})]})]}),e.jsx("div",{className:"text-green-600 text-3xl",children:"🎉"})]})}),e.jsx("div",{className:`bg-gradient-to-br from-red-50 to-pink-100 border-2 rounded-xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 cursor-pointer ${p==="declined"?"border-red-500 ring-4 ring-red-200":"border-red-300 hover:border-red-400"}`,onClick:()=>E("declined"),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-4 bg-gradient-to-br from-red-400 to-pink-500 rounded-xl shadow-lg",children:e.jsx("span",{className:"text-white text-2xl",children:"❌"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-bold text-red-800 uppercase tracking-wide",children:"Απορριφθέντα"}),e.jsx("p",{className:"text-3xl font-bold text-red-900",children:I.filter(r=>r.status==="declined").length})]})]}),e.jsx("div",{className:"text-red-600 text-3xl",children:"😔"})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100",children:[e.jsx("div",{className:"px-6 py-5 border-b border-gray-200 bg-gradient-to-r from-gray-50 to-blue-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 flex items-center",children:["📋 Κατάσταση Προγραμμάτων",e.jsxs("span",{className:"ml-3 bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium",children:[M.length," προγράμματα"]}),g>1&&e.jsxs("span",{className:"ml-2 bg-gray-100 text-gray-600 px-3 py-1 rounded-full text-sm font-medium",children:["Σελίδα ",f," από ",g]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[p!=="all"&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:["Φιλτράρισμα:",e.jsxs("span",{className:"ml-1 font-semibold text-blue-600",children:[p==="pending"&&"⏳ Σε Αναμονή",p==="accepted"&&"✅ Αποδεκτά",p==="declined"&&"❌ Απορριφθέντα"]})]}),e.jsx("button",{onClick:()=>E("all"),className:"px-3 py-1 text-xs bg-gray-200 text-gray-700 rounded-full hover:bg-gray-300 transition-colors",children:"✕ Καθαρισμός"})]}),g>1&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>S(r=>Math.max(r-1,1)),disabled:f===1,className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:text-gray-700 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-white disabled:hover:text-gray-500 transition-all duration-200",children:"← Προηγούμενη"}),e.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(5,g)},(r,s)=>{let t;return g<=5||f<=3?t=s+1:f>=g-2?t=g-4+s:t=f-2+s,e.jsx("button",{onClick:()=>S(t),className:`px-3 py-2 text-sm font-medium rounded-lg transition-all duration-200 ${f===t?"bg-blue-600 text-white shadow-lg":"text-gray-700 bg-white border border-gray-300 hover:bg-gray-50 hover:text-gray-900"}`,children:t},t)})}),e.jsx("button",{onClick:()=>S(r=>Math.min(r+1,g)),disabled:f===g,className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:text-gray-700 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-white disabled:hover:text-gray-500 transition-all duration-200",children:"Επόμενη →"})]})]})]})}),e.jsx("div",{className:"divide-y divide-gray-200",children:ne.length===0?e.jsx("div",{className:"px-6 py-8 text-center text-gray-500",children:v||p!=="all"?e.jsxs("div",{children:[e.jsx("p",{children:v?`Δεν βρέθηκαν προγράμματα για την αναζήτηση "${v}"`:`Δεν βρέθηκαν προγράμματα με κατάσταση "${p}"`}),e.jsxs("div",{className:"mt-3 space-x-2",children:[v&&e.jsx("button",{onClick:()=>W(""),className:"px-3 py-1 text-sm bg-blue-100 text-blue-700 rounded-full hover:bg-blue-200 transition-colors",children:"✕ Καθαρισμός αναζήτησης"}),p!=="all"&&e.jsx("button",{onClick:()=>E("all"),className:"px-3 py-1 text-sm bg-gray-100 text-gray-700 rounded-full hover:bg-gray-200 transition-colors",children:"✕ Καθαρισμός φίλτρου"})]})]}):e.jsx("p",{children:"Δεν υπάρχουν προγράμματα Personal Training"})}):ne.map(r=>e.jsx("div",{className:"px-6 py-5 hover:bg-gradient-to-r hover:from-blue-50 hover:to-indigo-50 cursor-pointer transition-all duration-200 border-l-4 border-transparent hover:border-blue-400",onClick:()=>{te({email:r.user.email})||(ge(r.user),ve(r.user.id),setTimeout(()=>{const s=document.querySelector("#schedule-editor");s&&(s.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}),s.classList.add("animate-pulse"),setTimeout(()=>{s.classList.remove("animate-pulse")},2e3))},500))},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:r.user.profile_photo?e.jsx("img",{src:r.user.profile_photo,alt:`${r.user.firstName} ${r.user.lastName}`,className:"w-12 h-12 rounded-full object-cover border-2 border-white shadow-lg",onError:s=>{const t=s.target;t.style.display="none";const a=t.parentElement;a&&(a.innerHTML='<div class="w-12 h-12 bg-gradient-to-br from-blue-400 to-purple-500 rounded-full flex items-center justify-center shadow-lg"><svg class="h-6 w-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg></div>')}}):e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-400 to-purple-500 rounded-full flex items-center justify-center shadow-lg",children:e.jsx(Ie,{className:"h-6 w-6 text-white"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:"text-base font-bold text-gray-900",children:[r.user.firstName," ",r.user.lastName]}),e.jsxs("p",{className:"text-sm text-gray-600 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"📧"}),r.user.email]}),e.jsxs("div",{className:"flex items-center space-x-3 mt-2",children:[e.jsxs("p",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded-full",children:["📅 ",r.schedule.month,"/",r.schedule.year]}),e.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-bold ${L(r.schedule)==="Personal Training"?"bg-blue-100 text-blue-800 border border-blue-200":L(r.schedule)==="Kick Boxing"?"bg-red-100 text-red-800 border border-red-200":"bg-purple-100 text-purple-800 border border-purple-200"}`,children:[L(r.schedule)==="Personal Training"&&"💪",L(r.schedule)==="Kick Boxing"&&"🥊",L(r.schedule)==="Combo Training"&&"🔥",L(r.schedule)]})]})]})]})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm text-gray-500",children:["Δημιουργήθηκε: ",new Date(r.schedule.createdAt).toLocaleDateString("el-GR")]}),r.status==="accepted"&&r.schedule.acceptedAt&&e.jsxs("p",{className:"text-xs text-green-600",children:["Αποδεκτό: ",new Date(r.schedule.acceptedAt).toLocaleDateString("el-GR")]}),r.status==="declined"&&r.schedule.declinedAt&&e.jsxs("p",{className:"text-xs text-red-600",children:["Απορρίφθηκε: ",new Date(r.schedule.declinedAt).toLocaleDateString("el-GR")]})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsxs("span",{className:`inline-flex items-center px-4 py-2 rounded-full text-sm font-bold shadow-lg ${r.status==="pending"?"bg-gradient-to-r from-yellow-400 to-orange-500 text-white":r.status==="accepted"?"bg-gradient-to-r from-green-400 to-emerald-500 text-white":"bg-gradient-to-r from-red-400 to-pink-500 text-white"}`,children:[r.status==="pending"&&"⏳ Σε Αναμονή",r.status==="accepted"&&"✅ Αποδεκτό",r.status==="declined"&&"❌ Απορριφθέν"]})})]})]})},r.schedule.id))}),g>1&&e.jsx("div",{className:"px-6 py-4 border-t border-gray-200 bg-gradient-to-r from-gray-50 to-blue-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:e.jsxs("span",{children:["Εμφανίζονται ",ee+1,"-",Math.min(le,M.length)," από ",M.length," προγράμματα"]})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>S(r=>Math.max(r-1,1)),disabled:f===1,className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:text-gray-700 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-white disabled:hover:text-gray-500 transition-all duration-200",children:"← Προηγούμενη"}),e.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(5,g)},(r,s)=>{let t;return g<=5||f<=3?t=s+1:f>=g-2?t=g-4+s:t=f-2+s,e.jsx("button",{onClick:()=>S(t),className:`px-3 py-2 text-sm font-medium rounded-lg transition-all duration-200 ${f===t?"bg-blue-600 text-white shadow-lg":"text-gray-700 bg-white border border-gray-300 hover:bg-gray-50 hover:text-gray-900"}`,children:t},t)})}),e.jsx("button",{onClick:()=>S(r=>Math.min(r+1,g)),disabled:f===g,className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:text-gray-700 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-white disabled:hover:text-gray-500 transition-all duration-200",children:"Επόμενη →"})]})]})})]}),_&&c&&!te({email:_.email,personalTrainingCode:_.personalTrainingCode})&&e.jsxs("div",{className:"bg-gradient-to-br from-white to-blue-50 border-2 border-blue-200 rounded-xl shadow-xl p-8",id:"schedule-editor",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white p-6 rounded-xl shadow-lg",children:[e.jsxs("h3",{className:"text-2xl font-bold mb-2",children:["🏋️‍♂️ Πρόγραμμα για ",_.firstName," ",_.lastName]}),e.jsxs("p",{className:"text-blue-100 text-lg",children:["📅 ",pe[c.month-1]," ",c.year]})]}),e.jsx("div",{className:"flex space-x-2",children:A?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:we,className:"flex items-center space-x-1 px-3 py-1 bg-green-100 text-green-700 rounded-md hover:bg-green-200 transition-colors",children:[e.jsx(Ue,{className:"h-4 w-4"}),e.jsx("span",{children:"Προσθήκη Σεσίας"})]}),e.jsxs("button",{onClick:Ae,className:"flex items-center space-x-1 px-3 py-1 bg-primary-100 text-primary-700 rounded-md hover:bg-primary-200 transition-colors",children:[e.jsx($e,{className:"h-4 w-4"}),e.jsx("span",{children:"Αποθήκευση"})]}),e.jsx("button",{onClick:()=>Y(!1),className:"flex items-center space-x-1 px-3 py-1 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors",children:e.jsx("span",{children:"Ακύρωση"})})]}):e.jsxs("button",{onClick:()=>Y(!0),className:"flex items-center space-x-1 px-3 py-1 bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200 transition-colors",children:[e.jsx(Me,{className:"h-4 w-4"}),e.jsx("span",{children:"Επεξεργασία"})]})})]}),e.jsx("div",{className:"space-y-4",children:c.scheduleData.sessions.map(r=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ημέρα"}),A?e.jsx("input",{type:"date",value:r.date,onChange:s=>$(r.id,"date",s.target.value),className:"w-full border border-gray-300 rounded px-2 py-1"}):e.jsx("p",{className:"text-sm text-gray-900",children:new Date(r.date).toLocaleDateString("el-GR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ώρα Έναρξης"}),A?e.jsx("select",{value:r.startTime,onChange:s=>$(r.id,"startTime",s.target.value),className:"w-full border border-gray-300 rounded px-2 py-1",children:oe.map(s=>e.jsx("option",{value:s,children:s},s))}):e.jsx("p",{className:"text-sm text-gray-900",children:r.startTime})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ώρα Λήξης"}),A?e.jsx("select",{value:r.endTime,onChange:s=>$(r.id,"endTime",s.target.value),className:"w-full border border-gray-300 rounded px-2 py-1",children:oe.map(s=>e.jsx("option",{value:s,children:s},s))}):e.jsx("p",{className:"text-sm text-gray-900",children:r.endTime})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Τύπος"}),A?e.jsxs("select",{value:r.type,onChange:s=>$(r.id,"type",s.target.value),className:"w-full border border-gray-300 rounded px-2 py-1",children:[e.jsx("option",{value:"personal",children:"Personal Training"}),e.jsx("option",{value:"kickboxing",children:"Kick Boxing"}),e.jsx("option",{value:"combo",children:"Combo"})]}):e.jsx("p",{className:"text-sm text-gray-900 capitalize",children:r.type})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Προπονητής"}),A?e.jsx("input",{type:"text",value:r.trainer,onChange:s=>$(r.id,"trainer",s.target.value),className:"w-full border border-gray-300 rounded px-2 py-1"}):e.jsx("p",{className:"text-sm text-gray-900",children:r.trainer})]}),e.jsx("div",{className:"flex items-end",children:A&&e.jsxs("button",{onClick:()=>ke(r.id),className:"flex items-center space-x-1 px-2 py-1 bg-red-100 text-red-700 rounded hover:bg-red-200 transition-colors",children:[e.jsx(qe,{className:"h-4 w-4"}),e.jsx("span",{children:"Διαγραφή"})]})})]}),r.notes&&e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Σημειώσεις"}),A?e.jsx("input",{type:"text",value:r.notes,onChange:s=>$(r.id,"notes",s.target.value),className:"w-full border border-gray-300 rounded px-2 py-1",placeholder:"Σημειώσεις για τη σέσια"}):e.jsx("p",{className:"text-sm text-gray-900",children:r.notes})]})]},r.id))}),e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Γενικές Σημειώσεις"}),A?e.jsx("textarea",{value:c.scheduleData.notes||"",onChange:r=>{const s={...c,scheduleData:{...c.scheduleData,notes:r.target.value}};P(s)},className:"w-full border border-gray-300 rounded px-3 py-2",rows:3,placeholder:"Γενικές σημειώσεις για το πρόγραμμα..."}):e.jsx("p",{className:"text-sm text-gray-900",children:c.scheduleData.notes||"Δεν υπάρχουν σημειώσεις"})]})]})]}),k!=="personal-training"&&!V&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:e.jsx("p",{children:"Αυτή η κατηγορία θα υλοποιηθεί σύντομα."})})]})]}),he&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-t-2xl p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold mb-2",children:"🔑 Δημιουργία Κωδικού Personal Training"}),e.jsx("p",{className:"text-purple-100",children:"Δημιουργήστε έναν νέο κωδικό και προσωποποιημένο πρόγραμμα"})]}),e.jsx("button",{onClick:()=>O(!1),className:"text-white/80 hover:text-white hover:bg-white/20 rounded-full p-2 transition-all duration-200",children:e.jsx(me,{className:"h-6 w-6"})})]})}),e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 rounded-xl p-6 border border-indigo-200",children:[e.jsx("label",{className:"block text-lg font-bold text-indigo-800 mb-4 flex items-center",children:"🏋️‍♂️ Τύπος Προπόνησης"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("button",{type:"button",onClick:()=>H("individual"),className:`px-6 py-3 text-sm font-semibold rounded-lg transition-all duration-200 ${y==="individual"?"bg-indigo-600 text-white shadow-lg":"bg-white text-indigo-600 border-2 border-indigo-200 hover:border-indigo-400"}`,children:"👤 Ατομικό"}),e.jsx("button",{type:"button",onClick:()=>H("group"),className:`px-6 py-3 text-sm font-semibold rounded-lg transition-all duration-200 ${y==="group"?"bg-indigo-600 text-white shadow-lg":"bg-white text-indigo-600 border-2 border-indigo-200 hover:border-indigo-400"}`,children:"👥 Group"})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 border border-blue-200",children:[e.jsxs("label",{className:"block text-lg font-bold text-blue-800 mb-4 flex items-center",children:["👤 ",y==="individual"?"Επιλογή Χρήστη":"Επιλογή Χρηστών (Group)"]}),e.jsxs("div",{className:"flex space-x-3 mb-4",children:[e.jsx("button",{type:"button",onClick:()=>X("dropdown"),className:`px-4 py-2 text-sm font-semibold rounded-lg transition-all duration-200 ${J==="dropdown"?"bg-blue-600 text-white shadow-lg":"bg-white text-blue-600 border-2 border-blue-200 hover:border-blue-400"}`,children:"📋 Dropdown"}),e.jsx("button",{type:"button",onClick:()=>X("search"),className:`px-4 py-2 text-sm font-semibold rounded-lg transition-all duration-200 ${J==="search"?"bg-blue-600 text-white shadow-lg":"bg-white text-blue-600 border-2 border-blue-200 hover:border-blue-400"}`,children:"🔍 Αναζήτηση"})]}),J==="dropdown"?y==="individual"?e.jsxs("select",{className:"w-full px-4 py-3 border-2 border-blue-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 text-gray-700",value:u.selectedUserId,onChange:r=>B({...u,selectedUserId:r.target.value}),children:[e.jsx("option",{value:"",children:"-- Επιλέξτε χρήστη --"}),j.length>0?j.map(r=>e.jsxs("option",{value:r.id,children:[r.firstName," ",r.lastName," (",r.email,")"]},r.id)):e.jsx("option",{value:"",disabled:!0,children:"Δεν υπάρχουν χρήστες"})]}):e.jsx("div",{className:"max-h-48 overflow-y-auto border-2 border-blue-200 rounded-xl bg-white",children:j.length>0?j.map(r=>e.jsx("div",{className:`p-3 hover:bg-blue-50 cursor-pointer border-b border-blue-100 last:border-b-0 transition-all duration-200 ${N.includes(r.id)?"bg-blue-100 border-l-4 border-l-blue-500":""}`,onClick:()=>{N.includes(r.id)?q(s=>s.filter(t=>t!==r.id)):q(s=>[...s,r.id])},children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:N.includes(r.id),onChange:()=>{},className:"mr-3 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-gray-900",children:[r.firstName," ",r.lastName]}),e.jsx("div",{className:"text-sm text-gray-600",children:r.email})]})]})},r.id)):e.jsx("div",{className:"p-4 text-gray-500 text-sm text-center",children:"Δεν υπάρχουν χρήστες"})}):e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"text",className:"w-full px-4 py-3 border-2 border-blue-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 text-gray-700 placeholder-gray-400",placeholder:"🔍 Αναζήτηση με όνομα ή email...",value:G,onChange:r=>se(r.target.value)}),G&&e.jsx("div",{className:"max-h-48 overflow-y-auto border-2 border-blue-200 rounded-xl bg-white shadow-lg",children:ae.length>0?ae.map(r=>e.jsxs("div",{className:`p-4 hover:bg-blue-50 cursor-pointer border-b border-blue-100 last:border-b-0 transition-all duration-200 ${y==="individual"?u.selectedUserId===r.id?"bg-blue-100 border-l-4 border-l-blue-500":"":N.includes(r.id)?"bg-blue-100 border-l-4 border-l-blue-500":""}`,onClick:()=>{y==="individual"?B({...u,selectedUserId:r.id}):N.includes(r.id)?q(s=>s.filter(t=>t!==r.id)):q(s=>[...s,r.id])},children:[y==="group"&&e.jsx("input",{type:"checkbox",checked:N.includes(r.id),onChange:()=>{},className:"mr-3 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsxs("div",{className:"font-semibold text-gray-900",children:[r.firstName," ",r.lastName]}),e.jsx("div",{className:"text-sm text-gray-600",children:r.email})]},r.id)):e.jsx("div",{className:"p-4 text-gray-500 text-sm text-center",children:"Δεν βρέθηκαν χρήστες"})})]}),(y==="individual"?u.selectedUserId:N.length>0)&&e.jsx("div",{className:"mt-4 p-4 bg-gradient-to-r from-green-50 to-emerald-50 border-2 border-green-300 rounded-xl",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center mr-3",children:e.jsx("span",{className:"text-white text-sm",children:"✓"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-bold text-green-800",children:["✅ ",y==="individual"?"Επιλεγμένος:":"Επιλεγμένοι:"]}),y==="individual"?e.jsxs("div",{className:"text-xs text-green-600",children:[(ie=j.find(r=>r.id===u.selectedUserId))==null?void 0:ie.firstName," ",(de=j.find(r=>r.id===u.selectedUserId))==null?void 0:de.lastName," (",(ce=j.find(r=>r.id===u.selectedUserId))==null?void 0:ce.email,")"]}):e.jsxs("div",{className:"text-xs text-green-600",children:[N.map(r=>{const s=j.find(t=>t.id===r);return s?`${s.firstName} ${s.lastName}`:"Άγνωστος"}).join(", ")," (",N.length," χρήστες)"]})]})]})})]}),e.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl p-6 border border-purple-200",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-lg font-bold text-purple-800 mb-3 flex items-center",children:"🔑 Κωδικός"}),e.jsx("input",{type:"text",className:"w-full px-4 py-3 border-2 border-purple-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-200 text-gray-700 placeholder-gray-400",placeholder:"π.χ. PERSONAL2024",value:u.code,onChange:r=>B({...u,code:r.target.value})})]})}),e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-yellow-50 rounded-xl p-6 border border-orange-200",children:[e.jsx("h4",{className:"text-xl font-bold text-orange-800 mb-6 flex items-center",children:"🏋️‍♂️ Προσωποποιημένο Πρόγραμμα"}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"bg-gray-100 grid grid-cols-8 gap-0 text-sm font-semibold text-gray-700 border-b",children:[e.jsx("div",{className:"p-3 border-r",children:"#"}),e.jsx("div",{className:"p-3 border-r",children:"📅 Ημερομηνία"}),e.jsx("div",{className:"p-3 border-r",children:"🕐 Έναρξη"}),e.jsx("div",{className:"p-3 border-r",children:"🕕 Λήξη"}),e.jsx("div",{className:"p-3 border-r",children:"💪 Τύπος"}),e.jsx("div",{className:"p-3 border-r",children:"🏠 Αίθουσα"}),e.jsx("div",{className:"p-3 border-r",children:"👨‍🏫 Προπονητής"}),e.jsx("div",{className:"p-3",children:"📝 Σημειώσεις"})]}),e.jsx("div",{className:"divide-y divide-gray-200",children:K.map((r,s)=>e.jsxs("div",{className:"grid grid-cols-8 gap-0 hover:bg-gray-50",children:[e.jsx("div",{className:"p-3 border-r bg-gray-50 text-center text-sm text-gray-600 font-medium",children:s+1}),e.jsx("div",{className:"p-2 border-r",children:e.jsx("input",{type:"date",className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-orange-500 focus:border-orange-500",value:r.date,onChange:t=>{w(a=>a.map((o,i)=>i===s?{...o,date:t.target.value}:o))}})}),e.jsx("div",{className:"p-2 border-r",children:e.jsx("input",{type:"time",className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-orange-500 focus:border-orange-500",value:r.startTime,onChange:t=>w(a=>a.map((o,i)=>i===s?{...o,startTime:t.target.value}:o))})}),e.jsx("div",{className:"p-2 border-r",children:e.jsx("input",{type:"time",className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-orange-500 focus:border-orange-500",value:r.endTime,onChange:t=>w(a=>a.map((o,i)=>i===s?{...o,endTime:t.target.value}:o))})}),e.jsx("div",{className:"p-2 border-r",children:e.jsxs("select",{className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-orange-500 focus:border-orange-500",value:r.type,onChange:t=>w(a=>a.map((o,i)=>i===s?{...o,type:t.target.value}:o)),children:[e.jsx("option",{value:"personal",children:"Personal"}),e.jsx("option",{value:"kickboxing",children:"Kick Boxing"}),e.jsx("option",{value:"combo",children:"Combo"})]})}),e.jsx("div",{className:"p-2 border-r",children:e.jsxs("select",{className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-orange-500 focus:border-orange-500",value:r.room,onChange:t=>w(a=>a.map((o,i)=>i===s?{...o,room:t.target.value}:o)),children:[e.jsx("option",{value:"Αίθουσα Mike",children:"Αίθουσα Mike"}),e.jsx("option",{value:"Αίθουσα Jordan",children:"Αίθουσα Jordan"})]})}),e.jsx("div",{className:"p-2 border-r",children:e.jsx("input",{type:"text",className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-orange-500 focus:border-orange-500",value:r.trainer,onChange:t=>w(a=>a.map((o,i)=>i===s?{...o,trainer:t.target.value}:o))})}),e.jsx("div",{className:"p-2",children:e.jsx("input",{type:"text",className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-orange-500 focus:border-orange-500",value:r.notes||"",onChange:t=>w(a=>a.map((o,i)=>i===s?{...o,notes:t.target.value}:o))})})]},r.id))})]}),e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{type:"button",className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors text-sm font-medium flex items-center",onClick:()=>w(r=>[...r,{id:`tmp-${r.length+1}`,date:new Date().toISOString().split("T")[0],startTime:"19:00",endTime:"20:00",type:"personal",trainer:"",room:"Αίθουσα Mike",notes:""}]),children:"➕ Προσθήκη Γραμμής"}),K.length>1&&e.jsx("button",{type:"button",className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors text-sm font-medium flex items-center",onClick:()=>w(r=>r.slice(0,-1)),children:"➖ Διαγραφή Τελευταίας"})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Σύνολο: ",K.length," σεσίας"]})]})]})]}),e.jsxs("div",{className:"flex space-x-4 mt-8 pt-6 border-t border-gray-200",children:[e.jsx("button",{onClick:()=>O(!1),className:"flex-1 px-6 py-3 bg-gradient-to-r from-gray-500 to-gray-600 text-white rounded-xl hover:from-gray-600 hover:to-gray-700 transition-all duration-200 font-semibold shadow-lg",children:"❌ Ακύρωση"}),e.jsx("button",{onClick:Ce,disabled:!u.code.trim()||(y==="individual"?!u.selectedUserId:N.length===0),className:"flex-1 px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-xl hover:from-green-600 hover:to-emerald-600 transition-all duration-200 font-semibold shadow-lg disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:from-green-500 disabled:hover:to-emerald-500",children:"✅ Δημιουργία Κωδικού"})]})]})]})})]})};export{ze as default};
